<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLACKTHORN INTRANET v3.1.4</title>
    <style>
        /* Ваши оригинальные стили остаются без изменений */
        body { background-color: #000; color: #0f0; font-family: 'Courier New', monospace; margin: 0; padding: 0; }
        .terminal { width: 90%; max-width: 800px; margin: 20px auto; border: 1px solid #0f0; padding: 10px; }
        /* ... остальной CSS ... */
    </style>
</head>
<body>
    <!-- Аудио с локальными путями -->
    <audio id="bg-sound" loop><source src="sounds/bg-noise.mp3" type="audio/mpeg"></audio>
    <audio id="glitch-sound"><source src="sounds/glitch.mp3" type="audio/mpeg"></audio>
    <audio id="error-sound"><source src="sounds/error.mp3" type="audio/mpeg"></audio>

    <div class="terminal">
        <div class="scanlines"></div>
        <div id="main-interface">
            <!-- Динамически загружаемый контент -->
            > SYSTEM INITIALIZATION...<br>
            > LOADING SECURITY PROTOCOLS...
        </div>
        <button id="audio-btn">ENABLE AUDIO</button>
    </div>

    <script>
        // ========== ИНИЦИАЛИЗАЦИЯ ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Загрузка основного интерфейса
            setTimeout(loadMainInterface, 1500);
            
            // Инициализация аудио
            const audioBtn = document.getElementById('audio-btn');
            audioBtn.addEventListener('click', toggleAudio);
        });

        // ========== ОСНОВНЫЕ ФУНКЦИИ ==========
        function loadMainInterface() {
            document.getElementById('main-interface').innerHTML = `
                <div class="status-bar">
                    > INMATE_ID: CELL-${Math.floor(Math.random() * 20) + 1}<br>
                    > CREDITS: 120<br>
                    > STATUS: <span class="error">RESTRICTED</span>
                </div>
                <div class="menu">
                    <div onclick="showSection('schedule')">[1] SCHEDULE</div>
                    <div onclick="showSection('shop')">[2] CREDIT SHOP</div>
                    <div onclick="showSection('violations')">[3] VIOLATIONS</div>
                    <div onclick="showSection('rules')">[4] RULES</div>
                    <div onclick="fakeCrash()" class="error">[6] REQUEST MEDICAL</div>
                </div>
                <div id="content-area"></div>
            `;
            
            // Инициализация глюков
            setInterval(simulateGlitch, 1000);
        }

        function showSection(section) {
            const content = {
                'schedule': `> NEXT EXPEDITION: SECTOR D-9 [78% FATALITY RATE]`,
                'shop': `> CREDIT SHOP: FILTERS (20cr), MEDKIT (15cr)`,
                'violations': `> LAST VIOLATION: BRACELET TAMPERING (-50cr)`,
                'rules': `> RULE 1: ESCAPE = TERMINATION`
            };
            document.getElementById('content-area').innerHTML = content[section] || "> ERROR: INVALID COMMAND";
        }

        function toggleAudio() {
            const bgSound = document.getElementById('bg-sound');
            bgSound.paused ? bgSound.play() : bgSound.pause();
            document.getElementById('audio-btn').textContent = 
                bgSound.paused ? "ENABLE AUDIO" : "DISABLE AUDIO";
        }

        function fakeCrash() {
            const interface = document.getElementById('main-interface');
            interface.innerHTML = `<span class="error">> SYSTEM FAILURE 0xDEAD</span>`;
            setTimeout(loadMainInterface, 3000);
        }

        function simulateGlitch() {
            if (Math.random() > 0.9) {
                document.body.style.color = ['#0f0', '#f00', '#00f'][Math.floor(Math.random() * 3)];
            }
        }
    </script>
</body>
</html>
